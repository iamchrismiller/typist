/*! typist - v0.1.0 - 2014-06-21 */
!function(a,b){"function"==typeof define&&define.amd?define([],b):a.Typist=b()}(this,function(){function a(a,b){if(this.sentences="object"==typeof b?b:null,this.currentSentence=0,this.currentIx=0,!this.sentences)throw new Error("You must include an Array of sentences");this.options=this._util.extend({elementId:null,cursor:"|",typeSpeed:100,timeout:1e3,random:!0,scrub:!1,pauseOnPunctuation:!0,start:!1},a),this.createContainers(),this.options.random&&this.sentences.shuffle(),this.options.start===!0&&this.start()}return a.prototype={constructor:a,_util:{extend:function(a,b){var c={};for(var d in a)c[d]=a[d];for(var e in b)c[e]=b[e];return c}},start:function(){this.appendCursor(),this.type()},stop:function(){this.removeCursor(),this.typeInterval&&clearInterval(this.typeInterval),this.scrubInterval&&clearInterval(this.scrubInterval)},createContainers:function(){this.$el=document.getElementById(this.options.elementId),this.$inner=document.createElement("span"),this.$el.appendChild(this.$inner)},type:function(){this.typeInterval=setInterval(this.updateText.bind(this),this.options.typeSpeed)},pause:function(a,b){clearInterval(this.typeInterval),setTimeout(function(){"function"==typeof b&&b(),this.type()}.bind(this),a)},updateText:function(){var a=this,b=this.sentences[this.currentSentence];if(b.length>this.currentIx){var c=new RegExp("([,.!?;])$").test(b[a.currentIx]);a.$inner.textContent+=b[a.currentIx],a.currentIx++,this.options.pauseOnPunctuation===!0&&c&&this.pause(300)}else clearInterval(this.typeInterval),setTimeout(function(){a.changeSentence()},this.options.timeout)},scrubText:function(a){var b=this;this.scrubInterval=setInterval(function(){b.currentIx+1>0?(b.$inner.textContent=b.$inner.textContent.substring(0,b.$inner.textContent.length-1),b.currentIx--):(clearInterval(b.scrubInterval),a())},100)},updateSentenceIx:function(){this.currentSentence+2<this.sentences.length?(this.currentSentence++,this.currentIx=0):(this.currentSentence=0,this.currentIx=0)},changeSentence:function(){var a=this;this.$inner.textContent.length&&this.options.scrub===!0?this.scrubText(function(){a.updateSentenceIx.call(a),a.type.call(a)}):(a.$inner.textContent="",a.updateSentenceIx(),a.type.call(a))},appendCursor:function(){var a=document.createElement("span");a.className="type-cursor",a.textContent=this.options.cursor,this.$el.appendChild(a)},removeCursor:function(){this.$el.textContent=this.$el.textContent.replace(this.options.cursor,"")}},Array.prototype.shuffle||(Array.prototype.shuffle=function(){var a,b,c=this.length;if(0===c)return this;for(;--c;)a=~~(Math.random()*(c+1)),b=this[c],this[c]=this[a],this[a]=b;return this}),a});